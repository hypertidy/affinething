{
    "collab_server" : "",
    "contents" : "#' Surface winds\n#' Greater Australian Region\n#'\n#'\n\n\n\n# system(sprintf(\"gdalinfo %s\", tfiles[1]))\n# Driver: PNG/Portable Network Graphics\n# Files: dev/www.bom.gov.au/charts_data/IDY20300/current/windarrow/10m/IDY20300.windarrow-10m.000.png\n# Size is 751, 527\n# Coordinate System is `'\n# Corner Coordinates:\n# Upper Left  (    0.0,    0.0)\n# Lower Left  (    0.0,  527.0)\n# Upper Right (  751.0,    0.0)\n# Lower Right (  751.0,  527.0)\n# Center      (  375.5,  263.5)\n# Band 1 Block=751x1 Type=Byte, ColorInterp=Palette\n# Color Table (RGB with 256 entries)\n\n\n## 0600 UTC\n##\"http://www.bom.gov.au/charts_data/IDY20300/current/windarrow/10m/IDY20300.windarrow-10m.000.png?1449640800\n##\"http://www.bom.gov.au/charts_data/IDY30100/current/primSwell/IDY30100.primSwell.000.png?1450634400\"\n#' @param x remote file name\n#' @details Example remote name\n#' http://www.bom.gov.au/charts_data/IDY20300/current/windarrow/10m/IDY20300.windarrow-10m.000.png?1449640800\nlocalname <- function(x) {\n  root <- file.path(getOption(\"default.datadir\"), \"dev\")\n  root <- file.path(\"dev\")\n  ## insert a daily subfolder\n  subfolder <- format(ISOdatetime(1970, 1, 1, 0, 0, 0, tz = \"UTC\") + as.numeric(tail(unlist(strsplit(x, \"\\\\?\")), 1)), \"%Y-%m-%d\")\n  ## strip the http:://\n  path <- sapply(strsplit(gsub(\"^http://\", \"\", x), \"\\\\?\"), \"[\", 1)\n  file.path(root,dirname(path), subfolder, basename(path))\n}\n\nwindremotename <- function(date, region = c(\"IDY20300\", \"IDY20001\"),  product = c(\"current\"), type = c(\"windarrow\")) {\n  date <- as.POSIXct(date, tz = \"UTC\")\n  region <- match.arg(region)\n  product <- match.arg(product)\n  type <- match.arg(type)\n  day <- format(unclass(as.POSIXct(paste(format(as.Date(date)), \"06:00:00\"), tz = \"UTC\")))\n  #day <- format(date)\n  h0 <- sprintf(\"%03d\", seq(0, 69, by = 3))\n  # http://www.bom.gov.au/charts_data/IDY20300/current/windarrow/10m/IDY20300.windarrow-10m.000.png?1449640800\n  sprintf(\"http://www.bom.gov.au/charts_data/%s/%s/%s/10m/%s.%s-10m.%s.png?%s\",\n          region, product, type, region, type, h0, day)\n\n}\n\n\nswellremotename <- function(date, region = c(\"IDY30100\"),  product = c(\"current\"), type = c(\"primSwell\")) {\n  date <- as.POSIXct(date, tz = \"UTC\")\n  region <- match.arg(region)\n  product <- match.arg(product)\n  type <- match.arg(type)\n  day <- unclass(as.POSIXct(paste(format(as.Date(date)), \"06:00:00\"), tz = \"UTC\"))\n  #day <- format(date)\n  h0 <- sprintf(\"%03d\", seq(0, 69, by = 3))\n  ##\"http://www.bom.gov.au/charts_data/IDY30100/current/primSwell/IDY30100.primSwell.000.png?1450634400\"\n  sprintf(\"http://www.bom.gov.au/charts_data/%s/%s/%s/%s.%s.%s.png?%s\",\n          region, product, type, region, type, h0, day)\n\n}\n\ndownload_png <- function(remote, local) {\n  if (!file.exists(local)) {\n    if (!file.exists(dirname(local))) dir.create(dirname(local), recursive = TRUE)\n    res <- try(download.file(remote, local, mode = \"wb\"))\n    if (inherits(res, \"try-error\")) local <- sprintf(\"could not download %s to %s\", remote, local)\n  }\n\n  local\n}\ndoswell_download <- function(date) {\n  rnames <- swellremotename(date)\n  lnames <- localname(rnames)\n  report <- character(length(rnames))\n  for (i in seq_along(rnames)) report[i] <- download_png(rnames[i], lnames[i])\n  report\n}\ndowindAnt_download <- function(date) {\n  rnames <- windremotename(date, region = \"IDY20001\")\n  lnames <- localname(rnames)\n  report <- character(length(rnames))\n  for (i in seq_along(rnames)) report[i] <- download_png(rnames[i], lnames[i])\n\n  report\n}\ndowindAus_download <- function(date) {\n  rnames <- windremotename(date, region = \"IDY20300\")\n  lnames <- localname(rnames)\n  report <- character(length(rnames))\n  for (i in seq_along(rnames)) report[i] <- download_png(rnames[i], lnames[i])\n\n  report\n}\n\n\n",
    "created" : 1450668519362.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2443962070",
    "id" : "50E5C512",
    "lastKnownWriteTime" : 1450668535,
    "last_content_update" : 1450668535940,
    "path" : "~/Documents/000mdsumner/GIT/bomage/R/bomage.R",
    "project_path" : "R/bomage.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}